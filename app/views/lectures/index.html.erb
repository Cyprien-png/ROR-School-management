<p style="color: green"><%= notice %></p>

<% content_for :title, "Lectures Schedule" %>

<div class="space-y-6">
  <div class="flex justify-between items-center">
    <h1 class="text-2xl font-bold">Lectures Schedule</h1>
    <% if current_person.is_a?(Dean) %>
      <%= render 'shared/button', 
        text: "New Lecture", 
        icon: "fa-solid fa-plus",
        color: "green", 
        href: new_lecture_path %>
    <% end %>
  </div>

  <%= render 'shared/card', 
    title: "Weekly Schedule", 
    color: "green", 
    icon: "fa-solid fa-calendar-days",
    content: capture do %>
    
    <%= render 'shared/schedule', lectures: @lectures %>
    
  <% end %>

  <%= render 'shared/card', 
    title: "All Lectures", 
    color: "green", 
    icon: "fa-solid fa-list",
    content: capture do %>
    
    <%= render 'shared/table', headers: ["Subject", "Class", "Teacher", "Day", "Time", "Actions"], striped: true do %>
      <% @lectures.each do |lecture| %>
        <tr>
          <td class="px-6 py-4 whitespace-nowrap font-medium"><%= lecture.subject.name %></td>
          <td class="px-6 py-4 whitespace-nowrap"><%= lecture.school_class.name %></td>
          <td class="px-6 py-4 whitespace-nowrap"><%= "#{lecture.teacher.firstname} #{lecture.teacher.lastname}" %></td>
          <td class="px-6 py-4 whitespace-nowrap"><%= lecture.week_day.capitalize %></td>
          <td class="px-6 py-4 whitespace-nowrap"><%= lecture.start_time.strftime("%H:%M") %> - <%= lecture.end_time.strftime("%H:%M") %></td>
          <td class="px-6 py-4 whitespace-nowrap">
            <div class="flex space-x-2">
              <%= render 'shared/button', 
                text: "View", 
                icon: "fa-solid fa-eye",
                color: "outline-green", 
                size: "sm",
                href: lecture_path(lecture) %>
                
              <% if current_person.is_a?(Dean) %>
                <%= render 'shared/button', 
                  text: "Edit", 
                  icon: "fa-solid fa-pencil",
                  color: "outline-indigo", 
                  size: "sm",
                  href: edit_lecture_path(lecture) %>
                  
                <%= render 'shared/button', 
                  text: "Delete", 
                  icon: "fa-solid fa-trash",
                  color: "outline-red", 
                  size: "sm",
                  method: :delete,
                  confirm: "Are you sure you want to delete this lecture?",
                  href: lecture_path(lecture) %>
              <% end %>
            </div>
          </td>
        </tr>
      <% end %>
    <% end %>
  <% end %>
</div>
